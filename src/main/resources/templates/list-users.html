<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="https://www.thymeleaf.org">
	<head>
		<title>List Users</title>

	</head>
	<body>
		<div th:replace="~{fragments/general.html :: menu}"></div>
		<h1>List users</h1>
	    <table border="1" class="table table-striped table-bordered table-responsive-md">
	        <thead class="table-dark">
	            <tr>
					<th></th>
	                <th th:text="#{form.username}">Username</th>
	                <th th:text="#{form.firstName}">First Name</th>
	                <th th:text="#{form.lastName}">Last Name</th>
	                <th th:text="#{form.phone}">Mobile</th>
	                <th>Actions</th>
	            </tr>
	        </thead>
	        <tbody class="table-group-divider">
	            <tr th:each="user, itemStats : ${usersList}">
					<td class="text-center">
						<a class="icon-link" th:href="@{/users/detail/{userId}(userId=${user.id})}">
						  +<span><i class="bi bi-bullseye text-success"></i></span>
						</a>
					</td>
	                <td th:text="${user.username}"></td>
	                <td th:text="${user.firstName}"></td>
	                <td th:text="${user.lastName}"></td>
	                <td th:text="${user.phone}"></td>
					<td class="text-center">
						<form th:object="${usersList[__${itemStats.index}__]}" th:action="@{/census-update/{userId}(userId=${usersList[__${itemStats.index}__].id})}" method="post">
						    <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />
						    <button th:unless="${usersList[__${itemStats.index}__].enabled}" type="submit" class="btn btn-small btn-warning" 
							style="--bs-btn-padding-y: .25rem; --bs-btn-padding-x: .5rem; --bs-btn-font-size: .75rem;" name="action" value="resend">
						        Resend Verification Mail								
						    </button>
						</form>
					</td>
	            </tr>
	        </tbody>
	    </table>
	
		<div th:if="${totalPages > 1}">
			<nav aria-label="Page navigation example">
				<ul class="pagination pagination-sm">
					<li class="page-item">
						<p class="page-link">Total Rows: [[${totalItems}]]</p>
					</li>
					<span th:each="i: ${#numbers.sequence(1, totalPages)}">
						<li class="page-item">
							<a class="page-link" th:href="@{'/users'(pageNo=${i})}">[[${i}]] </a>
						</li>
					</span>				    
				</ul>
			</nav>
		</div>
	</body>
</html>